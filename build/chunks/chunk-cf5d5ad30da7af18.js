"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7125,906],{7125:(t,e,s)=>{s.r(e),s.d(e,{default:()=>a});const i={components:{MyTicketList:s(906).default}};const a=(0,s(1900).Z)(i,(function(){return(0,this._self._c)("MyTicketList")}),[],!1,null,null,null).exports},906:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});const i={name:"TicketListItem",props:["ticket","replyExcerptToggle"],methods:{lastReply:function(){if(!this.ticket.hasOwnProperty("last_reply"))return null;var t=this.ticket.last_reply;return(t=t.replace(/(<([^>]+)>)/gi,"")).length>50&&(t=t.substring(0,100)+"..."),t}}};var a=s(1900);const n=(0,a.Z)(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto ms-2 mt-2"},[e("a",{attrs:{href:"#"}},[e("img",{staticClass:"bd-placeholder-img rounded rounded-circle customer-picture",attrs:{width:"50",height:"50",src:t.ticket.user.avatar}})])]),t._v(" "),e("div",{staticClass:"col d-flex flex-column position-static p-2 w-100"},[e("router-link",{attrs:{to:{name:"tickets.view",params:{id:t.ticket.id}}}},[e("div",{staticClass:"media-body small lh-125"},[e("span",{staticClass:"d-block text-gray-dark m-0 mb-1"},[e("router-link",{staticClass:"ticket-title",attrs:{to:{name:"tickets.view",params:{id:t.ticket.id}}}},[t._v(t._s(t.ticket.title))]),t._v(" "),e("span",{class:"badge badge-ticket-"+t.ticket.status},[t._v(t._s(t.$t(t.ticket.status)))]),t._v(" "),e("span",{class:"badge badge-ticket-priority-"+t.ticket.priority},[t._v(t._s(t.$t(t.ticket.priority)))]),t._v(" "),t.ticket.attachments.length?e("span",{staticClass:"badge bg-secondary"},[e("i",{staticClass:"bi bi-paperclip"})]):t._e()],1),t._v(" "),t.ticket.category?e("div",[t._v("\n            "+t._s(t.$t("Category"))+" : "),e("span",{class:"badge badge-light border",style:"color: #"+t.stringToColor(t.ticket.category.name)},[t._v(t._s(t.$t(t.ticket.category.name)))])]):t._e(),t._v(" "),t.replyExcerptToggle?e("div",{staticClass:"my-2",domProps:{textContent:t._s(t.lastReply())}}):t._e(),t._v(" "),e("div",{staticClass:"font-weight-light d-flex justify-content-between"},[e("div",[t._v(t._s(t.$t("Submited by"))+"\n                "),e("a",{staticClass:"font-weight-bold",attrs:{href:"#"}},[t._v("\n                    "+t._s(t.ticket.user.name)+"\n                ")]),t._v(" "),e("span",{staticClass:"mx-1"},[t._v(".")]),t._v(" "),e("span",{staticClass:"text-muted"},[t._v("\n                "+t._s(t.$t("Assigned to"))+"\n                "),e("a",{staticClass:"font-weight-bold",attrs:{href:"#"}},[t._v("\n                    "+t._s(t.ticket.assigned_to.name)+"\n                ")])]),t._v(" "),e("span",{staticClass:"mx-1"},[t._v(".")]),t._v(" "),e("span",[t._v(" on "+t._s(t.ticket.submitted_on))]),t._v(" "),t.ticket.last_reply_on?[e("span",{staticClass:"mx-1"},[t._v(".")]),t._v(" "),e("span",[t._v(" "+t._s(t.$t("Last reply"))+" "+t._s(t.ticket.last_reply_on))])]:t._e()],2)])])])],1)])}),[],!1,null,null,null).exports;var l=s(9669),o=s.n(l);const c={data:function(){return{isLoading:!0,tickets:[],currentPage:1,metaData:{to:null,total:0},selectedStatus:"open",replyExcerptToggle:!1,nextPage:null}},components:{ListItem:n},mounted:function(){this.nextPage=this.$api_url+"tickets",this.loadList("open")},props:["title","category","type"],methods:{loadList:function(t){var e=this;this.isLoading=!0,o().get(this.nextPage).then((function(t){e.metaData=t.data.meta,e.nextPage=t.data.links.next;var s=t.data.data;e.tickets=e.tickets.concat(s)})).catch((function(t){e.$showError(t)})).finally((function(){e.isLoading=!1}))},loadMore:function(){this.loadList("open")}},computed:{filteredList:function(){var t=this,e=t.selectedStatus;return"all"===e?t.tickets:t.tickets.filter((function(t){return t.status===e}))}}};const r=(0,a.Z)(c,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"d-flex justify-content-end options mb-3"},[e("router-link",{staticClass:"btn btn-sm btn-primary shadow-sm float-end mx-1",attrs:{to:"/tickets/new"}},[e("i",{staticClass:"bi bi-plus text-white-50"}),t._v("\n      "+t._s(t.$t("New ticket"))+"\n    ")])],1),t._v(" "),t.isLoading?e("pre-loader"):e("div",{staticClass:"p-0 mb-5 bg-white rounded shadow-sm tickets tickets-list"},[e("div",{staticClass:"border-bottom border-gray p-3 mb-0 ticket-section-title overflow-auto ticket-list-option"},[e("input",{staticClass:"btn btn-link p-1 text-grey",class:{active:"all"==t.selectedStatus},attrs:{type:"button",value:t.$t("All")+" ("+t.metaData.total+")"},on:{click:function(e){t.selectedStatus="all"}}}),t._v("\n      .\n      "),e("input",{staticClass:"btn btn-link p-1 text-danger",class:{active:"open"==t.selectedStatus},attrs:{type:"button",value:t.$t("Open")},on:{click:function(e){t.selectedStatus="open"}}}),t._v("\n      .\n      "),e("input",{staticClass:"btn btn-link p-1 text-secondary",class:{active:"closed"==t.selectedStatus},attrs:{type:"button",value:t.$t("Closed")},on:{click:function(e){t.selectedStatus="closed"}}}),t._v("\n      .\n      "),e("input",{staticClass:"btn btn-link p-1 text-success",class:{active:"resolved"==t.selectedStatus},attrs:{type:"button",value:t.$t("resolved")},on:{click:function(e){t.selectedStatus="resolved"}}}),t._v(" "),e("div",{staticClass:"float-end"},[e("button",{staticClass:"btn btn-outline-secondary btn-sm",on:{click:function(e){t.replyExcerptToggle=!1}}},[e("i",{staticClass:"bi bi-list"})]),t._v(" "),e("button",{staticClass:"btn btn-outline-secondary btn-sm",on:{click:function(e){t.replyExcerptToggle=!0}}},[e("i",{staticClass:"bi bi-body-text"})])])]),t._v(" "),0==t.filteredList.length?e("empty-state",{attrs:{text:"No tickets yet"}}):e("div",[t._l(t.filteredList,(function(s){return e("div",{key:s.id,staticClass:"media text-muted ticket border-bottom border-gray",class:{"has-reply":s.has_reply}},[e("ListItem",{attrs:{replyExcerptToggle:t.replyExcerptToggle,ticket:s}})],1)})),t._v(" "),e("scroll-loader",{attrs:{"loader-method":t.loadList,"loader-disable":null==t.nextPage}})],2)],1)],1)}),[],!1,null,null,null).exports},1900:(t,e,s)=>{function i(t,e,s,i,a,n,l,o){var c,r="function"==typeof t?t.options:t;if(e&&(r.render=e,r.staticRenderFns=s,r._compiled=!0),i&&(r.functional=!0),n&&(r._scopeId="data-v-"+n),l?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(l)},r._ssrRegister=c):a&&(c=o?function(){a.call(this,(r.functional?this.parent:this).$root.$options.shadowRoot)}:a),c)if(r.functional){r._injectStyles=c;var d=r.render;r.render=function(t,e){return c.call(e),d(t,e)}}else{var u=r.beforeCreate;r.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:r}}s.d(e,{Z:()=>i})}}]);