"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8774],{8227:(t,e,i)=>{i.d(e,{Z:()=>a});var n=i(1519),s=i.n(n)()((function(t){return t[1]}));s.push([t.id,".ticket-reply-item img,.ticket-reply-item video{height:auto;max-width:100%}.my-msg{background:#2196f30f}.reply-attachments .btn.attachment{border:none;color:#7d7d7d;font-size:.7em;margin:0 3px;padding:.5em}.reply-attachments .btn.attachment:hover{background:#fff}.reply-attachments{border-top:1px dashed #0000002b}",""]);const a=s},1519:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=t(e);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,n){"string"==typeof t&&(t=[[null,t,""]]);var s={};if(n)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(s[o]=!0)}for(var r=0;r<t.length;r++){var c=[].concat(t[r]);n&&s[c[0]]||(i&&(c[2]?c[2]="".concat(i," and ").concat(c[2]):c[2]=i),e.push(c))}},e}},3379:(t,e,i)=>{var n,s=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},a=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),o=[];function r(t){for(var e=-1,i=0;i<o.length;i++)if(o[i].identifier===t){e=i;break}return e}function c(t,e){for(var i={},n=[],s=0;s<t.length;s++){var a=t[s],c=e.base?a[0]+e.base:a[0],l=i[c]||0,d="".concat(c," ").concat(l);i[c]=l+1;var u=r(d),f={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(o[u].references++,o[u].updater(f)):o.push({identifier:d,updater:h(f,e),references:1}),n.push(d)}return n}function l(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var s=i.nc;s&&(n.nonce=s)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var o=a(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var d,u=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join("\n")});function f(t,e,i,n){var s=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=u(e,s);else{var a=document.createTextNode(s),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}function p(t,e,i){var n=i.css,s=i.media,a=i.sourceMap;if(s?t.setAttribute("media",s):t.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var v=null,m=0;function h(t,e){var i,n,s;if(e.singleton){var a=m++;i=v||(v=l(e)),n=f.bind(null,i,a,!1),s=f.bind(null,i,a,!0)}else i=l(e),n=p.bind(null,i,e),s=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else s()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=s());var i=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<i.length;n++){var s=r(i[n]);o[s].references--}for(var a=c(t,e),l=0;l<i.length;l++){var d=r(i[l]);0===o[d].references&&(o[d].updater(),o.splice(d,1))}i=a}}}},8701:(t,e,i)=>{i.r(e),i.d(e,{default:()=>m});const n={data:function(){return{}},props:["ticket"],methods:{fileIcon:function(t){return"pdf"==this.fileType(t)?"bi-file-pdf":"image"==this.fileType(t)?"bi-file-image":"doc"==this.fileType(t)?"bi-file-word":"zip"==this.fileType(t)?"bi-file-archive":"bi-file"},fileType:function(t){return t.includes("application/pdf")?"pdf":t.includes("image")?"image":t.includes("officedocument")?"doc":t.includes("zip")?"zip":null}}};var s=i(1900);const a=(0,s.Z)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"card sticky-section-item"},[e("h6",{staticClass:"card-header"},[t._v(t._s(t.$t("Ticket details")))]),t._v(" "),e("div",{staticClass:"card-body p-1"},[e("ul",{staticClass:"list-group list-group-flush"},[e("li",{staticClass:"list-group-item p-2"},[e("i",{staticClass:"bi bi-folder2-open"}),t._v("\n          "+t._s(t.$t("Category"))+" :\n          "),e("strong",[t._v(t._s(t.ticket.category.name))])]),t._v(" "),e("li",{staticClass:"list-group-item p-2"},[e("i",{staticClass:"bi bi-user"}),t._v("\n          "+t._s(t.$t("Assigned to"))+"\n          "),e("strong",[t._v(t._s(t.ticket.assigned_to.name))])]),t._v(" "),e("li",{staticClass:"list-group-item p-2"},[e("i",{staticClass:"bi bi-list-ul"}),t._v("\n          "+t._s(t.$t("Priority"))+"\n          "),e("strong",{class:"ticket-priority level-"+t.ticket.priority},[t._v(t._s(t.ticket.priority))])]),t._v(" "),e("li",{staticClass:"list-group-item p-2"},[e("i",{staticClass:"bi bi-clock"}),t._v("\n          "+t._s(t.$t("Submitted on"))+"\n          "),e("div",[e("small",[t._v(t._s(t.ticket.submitted_on))])])])]),t._v(" "),t.ticket.attachments.length?e("div",[e("div",[t._v(t._s(t.$t("Attachments")))]),t._v(" "),t._l(t.ticket.attachments,(function(i,n){return[["image","pdf"].includes(t.fileType(i.file_type))?e("fancy-box",{key:n,staticClass:"btn btn-outline-secondary mb-1 me-2 btn-sm attachment",attrs:{href:i.url,target:"_blank","data-fancybox":"gallery"}},[e("i",{staticClass:"bi bi",class:t.fileIcon(i.file_type)})]):e("a",{key:n,staticClass:"btn btn-outline-secondary mb-1 me-2 btn-sm attachment",attrs:{href:i.url}},[e("i",{staticClass:"bi bi",class:t.fileIcon(i.file_type)})])]}))],2):t._e()])])}),[],!1,null,null,null).exports;var o=i(9669),r=i.n(o);const c={data:function(){return{conversation:[],next_page:1,editorContent:null,editorValue:null,isLoading:!0}},props:["ticketid","type","ticketStatus"],methods:{loadConversation:function(t){var e=this;this.isLoading=!0,r().get(t).then((function(t){var i=t.data.data;e.conversation=e.conversation.concat(i),e.next_page=t.data.links.next,e.isLoading=!1,e.addLinkToImage()})).catch((function(t){console.log(t)}))},addLinkToImage:function(){},save:function(t){var e=this;this.$toastClear(),this.editorContent||"resolved"==t||"closed"==t?r().post(this.$api_url+"tickets/".concat(this.ticketid,"/conversation/add"),{content:this.editorContent,status:t}).then((function(i){if(e.$refs.editor.econtent=null,e.editorContent="",e.$showSuccess(i.data.message),i.data.data){var n=i.data.data,s=e.conversation;e.conversation=[].concat(n,s)}e.$emit("update",t)})).catch((function(t){e.$showError(t)})):this.$showError(this.$t("Please type a reply"))},fileIcon:function(t){return"pdf"==this.fileType(t)?"bi-file-pdf":"image"==this.fileType(t)?"bi-file-image":"doc"==this.fileType(t)?"bi-file-word":"zip"==this.fileType(t)?"bi-file-archive":"bi-file"},fileType:function(t){return t.includes("application/pdf")?"pdf":t.includes("image")?"image":t.includes("officedocument")?"doc":t.includes("zip")?"zip":null}},mounted:function(){this.loadConversation(this.$api_url+"tickets/"+this.ticketid+"/conversation")}};var l=i(3379),d=i.n(l),u=i(8227),f={insert:"head",singleton:!1};d()(u.Z,f);u.Z.locals;const p={data:function(){return{ticket:null,isLoading:!0}},mounted:function(){this.loadTicket()},components:{TicketWidget:a,TicketConversation:(0,s.Z)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("div",{staticClass:"card-body p-0"},["closed"==t.ticketStatus?e("div",{staticClass:"ticket-closed alert alert-secondary m-4"},[t._v("\n      "+t._s(t.$t("This ticket is closed and can not reopened or updated."))+"\n    ")]):e("div",{staticClass:"editor m-3 clearfix"},[e("text-editor",{ref:"editor",attrs:{uploadtype:"ticket",placeholder:t.$t("Add a reply")+"..."},model:{value:t.editorContent,callback:function(e){t.editorContent=e},expression:"editorContent"}}),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 py-2"},[e("div",{staticClass:"btn-group float-end",attrs:{role:"group","aria-label":"Button group with nested dropdown"}},[e("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button",disabled:!t.editorContent},on:{click:function(e){return t.save("open")}}},[t._v("\n              "+t._s(t.$t("Submit as"))+" "),e("strong",[t._v(t._s(t.$t("Open")))])]),t._v(" "),e("div",{staticClass:"btn-group",attrs:{role:"group"}},[e("button",{staticClass:"btn btn-outline-primary dropdown-toggle",attrs:{id:"btnGroupDrop1",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}}),t._v(" "),e("ul",{staticClass:"dropdown-menu dropdown-menu-end",attrs:{"aria-labelledby":"btnGroupDrop1"}},[e("li",[e("button",{staticClass:"dropdown-item",on:{click:function(e){return t.save("resolved")}}},[t._v("\n                    "+t._s(t.$t("Resolved"))+"\n                  ")])]),t._v(" "),e("li",[e("button",{staticClass:"dropdown-item",on:{click:function(e){return t.save("closed")}}},[t._v("\n                    "+t._s(t.$t("Closed"))+"\n                  ")])])])])])])])],1),t._v(" "),e("div",[e("transition-group",{attrs:{name:"fade",mode:"out-in"}},t._l(t.conversation,(function(i){return e("div",{key:i.id,staticClass:"ticket-c",class:{"my-msg":i.is_owner}},[e("hr",{staticClass:"m-0"}),t._v(" "),e("div",{staticClass:"media p-2 c-item ticket-reply-item"},[e("div",{staticClass:"media-body"},[e("div",[e("img",{staticClass:"me-3 bd-placeholder-img rounded rounded-circle float-start",attrs:{width:"40",height:"40",src:i.user.avatar,alt:i.user.name}}),t._v(" "),e("div",[e("span",{staticClass:"h5 my-0 d-block text-capitalize"},[t._v(t._s(i.user.name))]),t._v(" "),e("small",{staticClass:"text-muted mb-2 d-block"},[t._v(t._s(i.created_at))])])]),t._v(" "),e("div",{staticClass:"ticket-reply-content"},[e("p",{staticClass:"c-msg",domProps:{innerHTML:t._s(i.content)}},[t._v(t._s(i.content))])]),t._v(" "),i.attachments&&i.attachments.length?e("div",{staticClass:"reply-attachments mt-4 pt-2"},[e("div",[t._v(t._s(t.$t("Ticket attachments")))]),t._v(" "),t._l(i.attachments,(function(i,n){return[["image","pdf"].includes(t.fileType(i.file_type))?e("fancy-box",{key:n,staticClass:"btn btn-outline-secondary mb-1 btn-sm attachment",attrs:{href:i.url,target:"_blank","data-fancybox":"gallery"}},[e("i",{staticClass:"bi bi-2x",class:t.fileIcon(i.file_type)})]):e("a",{key:n,staticClass:"btn btn-outline-secondary mb-1 btn-sm attachment",attrs:{href:i.url}},[e("i",{staticClass:"bi bi-2x",class:t.fileIcon(i.file_type)})])]}))],2):t._e(),t._v(" "),i.user.signature?e("div",{staticClass:"user-signature"},[t._v("\n                "+t._s(i.user.signature)+"\n              ")]):t._e()])])])})),0),t._v(" "),t.isLoading?e("pre-loader"):t._e(),t._v(" "),t.next_page&&!t.isLoading?e("div",{staticClass:"text-center p-2"},[e("button",{staticClass:"btn btn-outline-secondary",on:{click:function(e){return t.loadConversation(t.next_page)}}},[t._v("\n          "+t._s(t.$t("Load more"))+"\n        ")])]):t._e()],1)])])}),[],!1,null,null,null).exports},props:{ticketid:{}},methods:{loadTicket:function(){var t=this;r().get(this.$api_url+"tickets/"+this.ticketid).then((function(e){t.ticket=e.data.data,t.isLoading=!1}))},ticketUpdated:function(t){this.ticket.status=t}}};const v={data:function(){return{ticketId:null}},beforeMount:function(){this.ticketId=this.$route.params.id},components:{Ticket:(0,s.Z)(p,(function(){var t=this,e=t._self._c;return e("div",[t.ticket?e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4 sticky-section"},[e("TicketWidget",{attrs:{ticket:t.ticket}})],1),t._v(" "),e("div",{staticClass:"col-md-8 mb-2"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"my-3"},[e("span",{staticClass:"h4"},[t._v(t._s(t.ticket.title))]),t._v(" "),e("span",{class:"badge badge-ticket-"+t.ticket.status},[t._v(t._s(t.ticket.status))]),t._v(" "),e("div",{staticClass:"float-end"},[e("small",[t._v(t._s(t.$t("Ticket ID"))+" : #"+t._s(t.ticketid))])])])]),t._v(" "),e("div",{staticClass:"col-md-12"},[e("TicketConversation",{attrs:{ticketStatus:t.ticket.status,ticketid:t.ticketid},on:{update:function(e){t.ticket.status=e}}})],1)])])]):e("pre-loader")],1)}),[],!1,null,null,null).exports}};const m=(0,s.Z)(v,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"container page-ticket"},[t.ticketId?e("Ticket",{attrs:{ticketid:t.ticketId}}):t._e()],1)}),[],!1,null,null,null).exports},1900:(t,e,i)=>{function n(t,e,i,n,s,a,o,r){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),a&&(l._scopeId="data-v-"+a),o?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=c):s&&(c=r?function(){s.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:s),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(t,e){return c.call(e),d(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:l}}i.d(e,{Z:()=>n})}}]);