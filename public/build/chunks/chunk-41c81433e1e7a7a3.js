"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6122],{6122:(s,e,t)=>{t.r(e),t.d(e,{default:()=>n});var i=t(9669),o=t.n(i);const r={data:function(){return{isLoading:!0,role:null,permissions:[],rolePermissions:[],modulesPermissions:[],emptyResult:!1}},props:["id"],mounted:function(){this.loadRolePermissions()},methods:{loadRolePermissions:function(){var s=this;this.isLoading=!0,o().post(this.$myaccount_url+"acl/roles/"+this.id+"/permissions").then((function(e){s.permissions=e.data.permissions,s.rolePermissions=e.data.role_permissions,s.modulesPermissions=e.data.modules_permissions,s.role=e.data.role})).catch((function(e){s.emptyResult=!0,s.$showError(e)})).then((function(e){s.isLoading=!1}))},hasPermission:function(s){return!!this.rolePermissions.filter((function(e){return e.name==s})).length},togglePermission:function(s,e){var t=this;o().post(this.$myaccount_url+"acl/roles/"+this.id+"/toggle_permission/"+e,{action:s?"assign":"revoke"}).then((function(s){t.$showSuccess(s.data.message),t.permissions=s.data.permissions,t.rolePermissions=s.data.role_permissions,t.modulesPermissions=s.data.modules_permissions,t.role=s.data.role})).catch((function(s){t.$showError(s)}))}}};const n=(0,t(1900).Z)(r,(function(){var s=this,e=s._self._c;return e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[s.isLoading?e("pre-loader"):s.emptyResult?e("empty-state"):e("div",[e("router-link",{staticClass:"btn btn-sm btn-light rounded",attrs:{to:{name:"settings.roles_and_permissions"}}},[e("i",{staticClass:"bi bi-box-arrow-left"})]),s._v(" "),e("span",{staticClass:"h3 text-capitalize"},[s._v(s._s(s.role.name.replaceAll("_"," ")))]),s._v(" "),e("div",{staticClass:"row my-2 text-capitalize"},[s._l(s.permissions,(function(t,i){return e("div",{key:i,staticClass:"card mx-2 card-body p-2 border shadow-none col-auto"},[e("p",{staticClass:"p-2 m-0 h4"},[s._v(s._s(i.replaceAll("_"," ")))]),s._v(" "),s._l(t,(function(t,i){return e("div",{key:i,staticClass:"form-check form-switch my-2"},[e("input",{staticClass:"form-check-input",attrs:{type:"checkbox","true-value":!0,"false-value":!1,id:"p-switch-"+t},domProps:{checked:s.hasPermission(t)},on:{change:function(e){return s.togglePermission(e.target.checked,t)}}}),s._v(" "),e("label",{staticClass:"form-check-label",attrs:{for:"p-switch-"+t}},[s._v(s._s(t.replaceAll("_"," ")))])])}))],2)})),s._v(" "),s._l(s.modulesPermissions,(function(t,i){return e("div",{key:i,staticClass:"card mx-2 card-body p-2 border shadow-none col-auto"},[e("p",{staticClass:"p-2 m-0 h4"},[s._v("\n              "+s._s(s.$t("Module")+" : "+i.replaceAll("_"," "))+"\n            ")]),s._v(" "),s._l(t,(function(t,i){return e("div",{key:i,staticClass:"form-check mx-2 my-1"},[e("input",{staticClass:"form-check-input",attrs:{type:"checkbox","true-value":!0,"false-value":!1,id:"p-switch-"+t},domProps:{checked:s.hasPermission(t)},on:{change:function(e){return s.togglePermission(e.target.checked,t)}}}),s._v(" "),e("label",{staticClass:"form-check-label",attrs:{for:"p-switch-"+t}},[s._v("\n                "+s._s(t.replaceAll("_"," "))+"\n              ")])])}))],2)}))],2)],1)],1)])}),[],!1,null,null,null).exports}}]);