"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1552],{1552:(t,e,a)=>{a.r(e),a.d(e,{default:()=>i});var s=a(9669),r=a.n(s);const o={data:function(){return{uploadProgress:0,uploading:!1,updating:!1,errorDetails:"",updateFailed:!1,updateCompleted:!1,successMsg:""}},methods:{upload:function(){var t=this;this.uploadProgress=0,this.uploading=!1,this.updating=!1,this.errorDetails="",this.updateFailed=!1,this.updateCompleted=!1;var e=document.querySelector("#updateFile");if(0!=e.files.length){var a=new FormData;a.append("file",e.files[0]),a.append("type","update");var s={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){var a=Math.round(100*e.loaded/e.total);t.uploadProgress=a}};this.uploading=!0,r().post(this.$myaccount_url+"upload",a,s).then((function(e){e?"ok"==e.data.status?(t.updating=!0,t.update(e.data.data)):(t.updateFailed=!0,"string"==typeof e.data.message?(t.errorDetails=e.data.message,t.$showError(e.data.message)):(t.$showError(e.data.message.join(",")),t.errorDetails=e.data.message.join(","))):t.$showError(t.$t("An error occured please try again"))}))}else this.$showError(this.$t("Please select a .zip file"))},update:function(t){var e=this;this.updating=!0,r().post(this.$myaccount_url+"update",{file:t}).then((function(t){"ok"==t.data.status?(e.updateCompleted=!0,e.successMsg=t.data.message,e.$showSuccess(t.data.message),e.uploadProgress=0,e.uploading=!1,e.updating=!1,e.errorDetails="",e.updateFailed=!1,e.refreshApp()):(e.updateFailed=!0,"string"==typeof t.data.message?(e.errorDetails=t.data.message,e.$showError(t.data.message)):(e.$showError(t.data.message.join(",")),e.errorDetails=t.data.message.join(",")))}))},refreshApp:function(){var t=this;r().post(this.$myaccount_url+"update/refresh_app").then((function(e){"ok"==e.data.status?(t.updateCompleted=!0,t.successMsg=e.data.message,t.$showSuccess(e.data.message),t.uploadProgress=0,t.uploading=!1,t.updating=!1,t.errorDetails="",t.updateFailed=!1):"string"==typeof e.data.message?(t.errorDetails=e.data.message,t.$showError(e.data.message)):(t.$showError(e.data.message.join(",")),t.errorDetails=e.data.message.join(","))}))}}};const i=(0,a(1900).Z)(o,(function(){var t=this,e=t._self._c;return e("div",[e("input",{staticClass:"form-control p-1",attrs:{type:"file",id:"updateFile",accept:"zip,application/zip,application/x-zip"}}),t._v(" "),e("small",{staticClass:"d-block m-2"},[t._v(t._s(t.$t("upload_update_notice")))]),t._v(" "),e("button",{staticClass:"btn btn-primary d-block mt-2",attrs:{type:"button"},on:{click:function(e){return t.upload()}}},[t._v(t._s(t.$t("Update")))]),t._v(" "),t.uploading?e("div",{staticClass:"my-3 card"},[e("div",{staticClass:"card-body"},[e("div",[100==t.uploadProgress?e("span",[e("i",{staticClass:"bi bi-check text-success"}),t._v(" "+t._s(t.$t("Uploaded")))]):e("span",[e("i",{staticClass:"bi bi-upload"}),t._v(" "+t._s(t.uploadProgress)+"%")])]),t._v(" "),t.updating?e("div",[t._v("\n                "+t._s(t.$t("Updating"))+"...\n            ")]):t._e()])]):t._e(),t._v(" "),t.updateFailed?e("div",{staticClass:"alert alert-danger my-3"},[t._v("\n        "+t._s(t.$t("Update failed"))+" : "+t._s(t.errorDetails)+"\n    ")]):t._e(),t._v(" "),t.updateCompleted?e("div",{staticClass:"alert alert-success my-3"},[t._v("\n        "+t._s(t.successMsg)+"\n    ")]):t._e()])}),[],!1,null,null,null).exports},1900:(t,e,a)=>{function s(t,e,a,s,r,o,i,d){var n,p="function"==typeof t?t.options:t;if(e&&(p.render=e,p.staticRenderFns=a,p._compiled=!0),s&&(p.functional=!0),o&&(p._scopeId="data-v-"+o),i?(n=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},p._ssrRegister=n):r&&(n=d?function(){r.call(this,(p.functional?this.parent:this).$root.$options.shadowRoot)}:r),n)if(p.functional){p._injectStyles=n;var l=p.render;p.render=function(t,e){return n.call(e),l(t,e)}}else{var u=p.beforeCreate;p.beforeCreate=u?[].concat(u,n):[n]}return{exports:t,options:p}}a.d(e,{Z:()=>s})}}]);